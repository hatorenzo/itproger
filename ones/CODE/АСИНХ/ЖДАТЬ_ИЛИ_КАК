
 -- "ДиалогВыбораФайла_1 СИНХРОН"
&НаКлиенте
Процедура ФайлТекстНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)

   Диалог = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.Открытие);
   Диалог.МножественныйВыбор = Ложь;

   Если Ждать Диалог.Выбрать() Тогда
      ПутьКФайлу = Диалог.ПолноеИмяФайла;
   КонецЕсли;   

КонецПроцедуры

 -- "ДиалогВыбораФайла_2 CALLBACK"

 &НаКлиенте
Процедура ФайлТекстНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)

   Диалог = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.Открытие);
   Диалог.МножественныйВыбор = Ложь;
   Оповещение = Новый ОписаниеОповещения("ФайлТекстНачалоВыбораЗавершение", ЭтаФорма);
   Диалог.Показать(Оповещение);

КонецПроцедуры

&НаКлиенте
Процедура ФайлТекстНачалоВыбораЗавершение(ВыбранныеФайлы, ДополнительныеПараметры) Экспорт

   Если (ВыбранныеФайлы <> Неопределено) Тогда
      ПутьКФайлу = ВыбранныеФайлы[0];       // АСИНХ работает по такойже семантике
   КонецЕсли;

КонецПроцедуры

-- "ДиалогВыбораФайла_3 АСИНХ copy"

&НаКлиенте
Асинх Процедура ФайлТекстНачалоВыбора(Элемент, ДанныеВыбора, СтандартнаяОбработка)

   Диалог = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.Открытие);
   Диалог.МножественныйВыбор = Ложь;

   Если Ждать Диалог.ВыбратьАсинх() Тогда
      ПутьКФайлу = Диалог.ПолноеИмяФайла;
   КонецЕсли;   

КонецПроцедуры


"// ОСОБЕННОСТИ

// * Характерно для всех старых "модальных" методов,
// показывающие диалоги
//  * ВвестиСтроку, ВвестиДату и аналоги
//  * ДиалогВыбораФайла, ДиалогВыбораЦвета, ДилогВыбораШрифта

// * Диалоги с префиксом "Показать" почти такие же
//  * ВопросАсинх
//  * ПредупреждениеАсинх
//  * СписокЗначений.ВыбратьЭлементАсинх


// НЮАНСЫ

// * "Обещание" имеет статус успеха/ошибки
// * Исключение, выброшенное в асинхронном коде (стороннем по отношению к нашему коду) перехватываются платформой
// * Мы можем узнать об исключении только "проверив" статус Обещения
// * Оператор "Ждать" проверит этот статус за нас, и если статус "было исключение", то выбросит это исключение в нашем стеке вызовов
"

