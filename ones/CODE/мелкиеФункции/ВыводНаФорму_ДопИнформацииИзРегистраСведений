&НаСервере
&После("ПриСозданииНаСервере")
Процедура осм_ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
  
  // + cbg 11.03.2024
  осм_УправлениеВидимостью();
  // - cbg 11.03.2024
  
КонецПроцедуры

&НаСервере
Процедура осм_УправлениеВидимостью()

  // + cbg 11.03.2024
  ДобавляемыеРеквизиты = Новый Массив();
  ТипСтрока = Новый ОписаниеТипов("Строка",,,, Новый КвалификаторыСтроки(100)); 
  ТипБулево = Новый ОписаниеТипов("Булево");
  НовРеквизит = Новый РеквизитФормы("осм_ДопИнформация", ТипСтрока, , "Доп.инф.", Истина);
  ДобавляемыеРеквизиты.Добавить(НовРеквизит);
  НовРеквизит = Новый РеквизитФормы("осм_ДопИнформацияИзменена", ТипБулево);
  ДобавляемыеРеквизиты.Добавить(НовРеквизит);
  ИзменитьРеквизиты(ДобавляемыеРеквизиты);
  
  НовЭлемент = Элементы.Добавить("осм_ДопИнформация", Тип("ПолеФормы"), Элементы.ГруппаШапкаЛевая);
  НовЭлемент.ПутьКДанным = "осм_ДопИнформация";
  НовЭлемент.Вид = ВидПоляФормы.ПолеВвода;
  НовЭлемент.УстановитьДействие("ПриИзменении", "ПриИзменении_осм_ДопИнформация");
  
  ЭтотОбъект.осм_ДопИнформация = РегистрыСведений.ДополнительныеСведения.осмДопИнформация(Объект.Ссылка);
  // - cbg 11.03.2024

КонецПроцедуры

&НаКлиенте
Процедура ПриИзменении_осм_ДопИнформация(Элемент)

  ЭтотОбъект.осм_ДопИнформацияИзменена = Истина  

КонецПроцедуры

&НаСервере
&После("ПередЗаписьюНаСервере")
Процедура осм_ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
  
    
КонецПроцедуры

&НаСервере
&После("ПослеЗаписиНаСервере")
Процедура осм_ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)

  Если ЭтотОбъект.осм_ДопИнформацияИзменена Тогда
     РегистрыСведений.ДополнительныеСведения.осмДопИнформацияЗапись(ТекущийОбъект.Ссылка, ЭтотОбъект.осм_ДопИнформация);            
  КонецЕсли;

КонецПроцедуры